<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:svg="clr-namespace:Avalonia.Svg.Skia;assembly=Avalonia.Svg.Skia"
             mc:Ignorable="d" d:DesignWidth="100" d:DesignHeight="100"
             x:Class="HyPrism.UI.Components.Inputs.CheckboxInput.CheckboxInput"
             x:Name="Root">

    <ToggleButton Name="Toggle"
                  IsChecked="{Binding IsChecked, ElementName=Root, Mode=TwoWay}"
                  Cursor="Hand"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Center">
        <ToggleButton.Template>
            <ControlTemplate>
                <Border Name="Container"
                        Width="24" Height="24"
                        CornerRadius="6"
                        BorderThickness="1"
                        Background="#10000000"
                        BorderBrush="#444444"
                        RenderTransform="scale(1)">

                    <!-- Check Icon -->
                    <svg:Svg Name="CheckIcon"
                             Path="/Assets/Icons/check.svg"
                             Width="16" Height="16"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"
                             Opacity="0"
                             Css="* { stroke: white; }">
                        <svg:Svg.Transitions>
                            <Transitions>
                                <DoubleTransition Property="Opacity" Duration="0:0:0.15"/>
                                <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.25" Easing="BackEaseOut"/>
                            </Transitions>
                        </svg:Svg.Transitions>
                        <svg:Svg.RenderTransform>scale(0.5)</svg:Svg.RenderTransform>
                    </svg:Svg>
                </Border>
            </ControlTemplate>
        </ToggleButton.Template>

        <ToggleButton.Styles>
            <!-- Checked State -->
            <Style Selector="ToggleButton:checked /template/ Border#Container">
                <Setter Property="Background" Value="{DynamicResource SystemAccentBrush}"/>
                <Setter Property="BorderBrush" Value="{DynamicResource SystemAccentBrush}"/>
            </Style>
            
            <Style Selector="ToggleButton:checked /template/ svg|Svg#CheckIcon">
                <Setter Property="Opacity" Value="1"/>
                <Setter Property="RenderTransform" Value="scale(1)"/>
            </Style>

            <!-- Unchecked Hover -->
            <Style Selector="ToggleButton:unchecked:pointerover /template/ Border#Container">
                <Setter Property="BorderBrush" Value="#888888"/>
                <Setter Property="Background" Value="#333333"/>
            </Style>
            
             <!-- Pressed -->
            <Style Selector="ToggleButton:pressed /template/ Border#Container">
                <Setter Property="RenderTransform" Value="scale(0.9)"/>
            </Style>
            <Style Selector="ToggleButton /template/ Border#Container">
                 <Setter Property="Transitions">
                     <Transitions>
                         <BrushTransition Property="Background" Duration="0:0:0.08"/>
                         <BrushTransition Property="BorderBrush" Duration="0:0:0.08"/>
                         <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2" Easing="CubicEaseOut"/>
                     </Transitions>
                 </Setter>
            </Style>

        </ToggleButton.Styles>
    </ToggleButton>
</UserControl>
