# Введение

**HyPrism** — это кроссплатформенный лаунчер игры Hytale, созданный с использованием современных технологий.

## Технологический стек

| Уровень | Технология |
|---------|-----------|
| Backend | .NET 10, C# 13 |
| Оболочка | Sciter (EmptyFlow.SciterAPI 1.2.3) |
| Frontend | Preact 10 + TypeScript + Vite |
| Анимации | Framer Motion (через preact/compat) |
| Стилизация | TailwindCSS v3 |
| Иконки | Lucide React (через preact/compat) |
| Маршрутизация | React Router DOM (через preact/compat) |
| DI | Microsoft.Extensions.DependencyInjection |
| Логирование | Serilog |
| Локализация | i18next (12 языков) |

## Принцип работы

HyPrism запускается как **консольное приложение .NET**, которое создаёт нативное **окно Sciter**. Sciter загружает Preact SPA напрямую из локальной файловой системы. Всё взаимодействие между Preact-фронтендом и .NET-бэкендом происходит через **IPC-каналы**.

```
Консольное приложение .NET → создаёт нативное окно Sciter
  ├── SciterAPIHost
  │     └── Безрамочное нативное окно
  │           └── SciterIpcBridge (WindowEventHandler)
  └── Preact SPA (загружается из wwwroot/index.html)
        └── ipc.ts → xcall(‘hyprismCall’) → IpcService.cs → .NET сервисы
```

Это **НЕ** веб-сервер — здесь нет ASP.NET, HTTP или REST. Фронтенд вызывает бэкенд через `xcall('hyprismCall', channel, json)` и получает push-события через глобальный `__hyprismReceive` — всё внутри одного процесса, без сокетов.

## Ключевые принципы

1. **Единый источник истины** — C#-аннотации в `IpcService.cs` определяют все IPC-каналы и TypeScript-типы; IPC-клиент для фронтенда полностью генерируется автоматически
2. **Инпроцессная изоляция** — Фронтенд работает внутри скриптингового движка Sciter; весь доступ к нативным API проходит исключительно через `SciterIpcBridge`, без глобальных Node.js и require()
3. **DI повсюду** — Все .NET-сервисы регистрируются в `Bootstrapper.cs` через внедрение через конструктор
4. **Кроссплатформенность** — Поддержка Windows, Linux, macOS благодаря .NET 10 + Sciter
5. **Экземплярная модель** — Каждая установка игры изолирована в собственной папке на основе GUID

## Поддерживаемые платформы

- **Windows** 10/11 (x64)
- **Linux** (x64) — AppImage, Flatpak
- **macOS** (x64, arm64)

## Поддерживаемые языки

HyPrism поддерживает 12 языков с возможностью переключения во время работы:

| Код | Язык |
|-----|------|
| en-US | Английский |
| ru-RU | Русский |
| de-DE | Немецкий |
| es-ES | Испанский |
| fr-FR | Французский |
| ja-JP | Японский |
| ko-KR | Корейский |
| pt-BR | Португальский (Бразилия) |
| tr-TR | Турецкий |
| uk-UA | Украинский |
| zh-CN | Китайский (упрощённый) |
| be-BY | Белорусский |
